{% load i18n %}
<br/>
<!-- Button trigger modal -->
<button type="button" id="add" class="btn btn-primary btn-md" data-toggle="modal" data-target="#ModalAddForm">
    Add Subscriber
</button>

<button type="button" id="edit" class="btn btn-primary btn-md" data-toggle="modal" data-target="#ModalEditForm" disabled="true">
    Edit
</button>

<button type="button" id="delete" class="btn btn-primary btn-md" data-toggle="modal" data-target="#ModalDeleteForm" disabled="true">
    Delete
</button>

<!-- modal add form -->
<div id="ModalAddForm" class="modal fade">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <h2>Add a Subscriber</h2>
                <form method="post" action="{% url 'profiles' %}" data-parsley-validate>
                    {% csrf_token %}
                    <div class="form-group">
                        {% for field in form %}
                            <label>{{ field.label }}</label>
                            {{ field }}
                            <br/>
                        {% endfor %}
                        {% if form.errors %}
                            <p>All the errors in the form are below</p>
                            {{ form.errors }}
                            <br/>

                        {% endif %}
                    </div>
                    <input type="submit" class="btn btn-success" value="Submit">
                </form>
            </div>
        </div>
    </div>
</div><!-- end of modal addform div -->

<!-- modal edit form -->
<div id="ModalEditForm" class="modal fade">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <h2>Edit a Subscriber</h2>
                <form role="form" method="POST" action="{% url 'profiles' %}" data-parsley-validate>
                    {% csrf_token %}
                    <div class="form-group">
                        {% for field in form %}
                            <label>{{ field.label }}</label>
                            {{ field }}
                            <br/>
                        {% endfor %}
                    </div>
                    <div>
                        <input type="submit" class="btn btn-success" value="Update">
                    </div>
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- modal delete form -->
<div id="ModalDeleteForm" class="modal fade">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <h2>Delete a Subscriber</h2>
                <form role="form" method="POST" action="{% url 'profiles' %}" data-parsley-validate>
                    {% csrf_token %}
                    <div class="form-group">
                        {% for field in form %}
                            <label>{{ field.label }}</label>
                            {{ field }}
                            <br/>
                        {% endfor %}
                    </div>
                    <div>
                        <input type="submit" class="btn btn-success" value="Delete">
                    </div>
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- user profile table -->
<div style="width:90%; margin:0 auto;">
    <table id="table_id" class="table table-striped table-bordered" cellspacing="1" width="100%">

        <thead>
        <th>{% trans "User" %}</th>
        <th>{% trans "Phone Number" %}</th>
        <th>{% trans "Display Name" %}</th>
        <th>{% trans "IMSI" %}</th>
        <th>{% trans "GUTI" %}</th>
        <th>{% trans "Local" %}</th>
        <th>{% trans "Role" %}</th>
        <th>{% trans "Connectivity Status" %}</th>
        <th>{% trans "Last Online" %}</th>
        <th>{% trans "Rate Limit Kbps" %}</th>
        </thead>
        <tbody>
        {% for d in data %}
            <tr role="row">
                <td>{{d.user}}</td>
                <td>{{d.phonenumber}}</td>
                <td>{{d.display_name}}</td>
                <td>{{d.imsi}}</td>
                <td>{{d.guti}}</td>

                {% if d.is_local == True%}
                    <td>{% trans "Yes" %}</td>
                {% else %}
                    <td>{% trans "No" %}</td>
                {% endif %}

                {%if d.role == 1 %}
                    <td>{% trans "Admin" %}</td>
                {%elif d.role == 2 %}
                    <td>{% trans "User" %}</td>
                {%else%}
                    <td>{% trans "Researcher" %}</td>
                {% endif %}

                {% if d.connectivity_status == 1 %}
                    <td>{%trans "Connected" %}</td>
                {% elif d.connectivity_status == 2 %}
                    <td>{% trans "Not Connected" %}</td>
                {% else %}
                    <td>{% trans "Deactivated" %}</td>
                {% endif %}

                <td>{{d.last_time_online}}</td>
                <td>{{d.rate_limit_kbps}}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
